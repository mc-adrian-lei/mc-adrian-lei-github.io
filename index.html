<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>32 Aspect Developmental Self Clock — Mind–Body–Energy Mapping</title>
  <style>
    :root {
      --bg: #f6f7fc;
      --panel: rgba(255, 255, 255, 0.9);
      --accent: #1d4ed8;
      --accent-2: #7c3aed;
      --good: #059669;
      --warn: #d97706;
      --bad: #dc2626;
      --focus: #facc15;
      --glass-stroke: rgba(148, 163, 233, 0.22);
    }

    body[data-theme="dark"] {
      --bg: #050914;
      --panel: rgba(18, 22, 45, 0.85);
      --accent: #60a5fa;
      --accent-2: #a855f7;
      --good: #34d399;
      --warn: #fbbf24;
      --bad: #f87171;
      --focus: #fde68a;
      --glass-stroke: rgba(120, 150, 255, 0.18);
    }

    body {
      margin: 0;
      font-family: "Inter", system-ui;
      color: #111;
      background: radial-gradient(circle at 70% 20%, rgba(125,211,252,0.24), transparent),
        linear-gradient(160deg, var(--bg), #e2e8f0);
      transition: background 0.6s ease, color 0.4s ease;
    }

    body[data-theme="dark"] {
      background: radial-gradient(900px 900px at 85% 18%, rgba(59, 130, 246, 0.18), transparent),
        linear-gradient(160deg, rgba(9, 12, 28, 0.92), var(--bg));
    }

    header {
      background: var(--panel);
      border: 1px solid var(--glass-stroke);
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      text-align: center;
      position: relative;
    }

    header h1 {
      font-size: clamp(20px, 2.5vw, 28px);
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: hueShift 6s linear infinite;
    }

    @keyframes hueShift {
      0% { filter: hue-rotate(0deg); }
      100% { filter: hue-rotate(360deg); }
    }

    .btn {
      background: linear-gradient(140deg, var(--accent), var(--accent-2));
      border: none;
      border-radius: 10px;
      color: white;
      padding: 8px 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.3s ease;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(59, 130, 246, 0.35);
    }

    canvas {
      display: block;
      width: 100%;
      height: 100%;
      border-radius: 16px;
      box-shadow: 0 12px 40px rgba(0,0,0,0.2);
    }

    footer {
      text-align: center;
      padding: 16px;
      color: #666;
      font-size: 13px;
      background: var(--panel);
      border-radius: 16px;
      margin: 16px auto;
      width: 90%;
      max-width: 800px;
    }

    .vis-hint {
      font-style: italic;
      color: var(--warn);
    }

    .resonance-glow {
      animation: pulse 3s infinite ease-in-out;
      filter: drop-shadow(0 0 12px var(--accent));
    }

    @keyframes pulse {
      0%, 100% { opacity: 0.8; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.02); }
    }
  </style>
</head>
<body>
  <header>
    <h1>32 Aspect Developmental Self Clock · Mind–Body–Energy Mapping</h1>
    <p class="subtitle">An evolving atlas of coherence, proportion, and compassion — powered by recursive awareness.</p>
    <button id="themeToggle" class="btn">Toggle Theme</button>
  </header>

  <main>
    <canvas id="clockCanvas" class="resonance-glow"></canvas>
  </main>

  <footer>
    <div class="vis-hint">Δι — The work is alive through imperfection.</div>
    <div>© Adrian Lei Martinez-Conol · Only When Prompted Research Initiative</div>
  </footer>

  <dialog id="sciModal" aria-label="Semantic Coherence Index explanation">
    <form method="dialog" class="modal-body">
      <header class="modal-head">
        <strong>Semantic Coherence Index</strong>
        <button class="btn" value="cancel">Close</button>
      </header>
      <p>The SCI summarises how harmoniously the 32 aspect activations align. It blends three signals:</p>
      <ol>
        <li><strong>Activation mean</strong> — higher overall activation raises the index.</li>
        <li><strong>Distribution balance</strong> — lower variance indicates the system is coherent.</li>
        <li><strong>Resonance coverage</strong> — similar stages, rings, and activation levels reinforce the network.</li>
      </ol>
      <p>The live value is scaled to 0–100 and updates instantly as you adjust sliders, shuffle activations, or change developmental emphasis.</p>
      <p id="sciFormula" class="vis-hint"></p>
    </form>
  </dialog>

  <dialog id="tutorialDialog" aria-label="Interactive tutorial">
    <form method="dialog" class="modal-body">
      <header class="modal-head">
        <strong>Self Clock Tutorial</strong>
        <button class="btn" value="cancel">Close</button>
      </header>
      <ol id="tutorialContent" class="tutorial-list"></ol>
    </form>
  </dialog>

  <dialog id="exportDialog" aria-label="Export options">
    <form method="dialog" class="modal-body">
      <header class="modal-head">
        <strong>Export Current Map</strong>
        <button class="btn" value="cancel">Close</button>
      </header>
      <p>Select a format to download the current developmental snapshot, including the SCI and resonance metrics.</p>
      <div class="export-grid">
        <button id="exportJson" class="btn" value="json">JSON (raw data)</button>
        <button id="exportCsv" class="btn secondary" value="csv">CSV (spreadsheet)</button>
        <button id="exportReport" class="btn secondary" value="html">Printable report</button>
      </div>
    </form>
  </dialog>

  <script>
    const canvas = document.getElementById('clockCanvas');
    const ctx = canvas.getContext('2d');
    function resizeCanvas() {
      canvas.width = window.innerWidth * 0.9;
      canvas.height = window.innerHeight * 0.6;
      draw();
    }
    window.addEventListener('resize', resizeCanvas);

    function draw() {
      const w = canvas.width;
      const h = canvas.height;
      ctx.clearRect(0, 0, w, h);
      const cx = w / 2;
      const cy = h / 2;
      const rings = 8;
      for (let i = 1; i <= rings; i++) {
        const r = (i / rings) * Math.min(cx, cy) * 0.9;
        ctx.beginPath();
        ctx.strokeStyle = `hsla(${(i * 45) % 360},70%,60%,0.3)`;
        ctx.lineWidth = 2;
        ctx.arc(cx, cy, r, 0, Math.PI * 2);
        ctx.stroke();
      }
      ctx.beginPath();
      ctx.fillStyle = 'hsla(200,80%,70%,0.25)';
      ctx.arc(cx, cy, 10, 0, Math.PI * 2);
      ctx.fill();
    }

    resizeCanvas();

    const themeToggle = document.getElementById('themeToggle');
    themeToggle.addEventListener('click', () => {
      const current = document.body.getAttribute('data-theme');
      const next = current === 'dark' ? 'light' : 'dark';
      document.body.setAttribute('data-theme', next);
    });
  </script>

</body>
</html>
